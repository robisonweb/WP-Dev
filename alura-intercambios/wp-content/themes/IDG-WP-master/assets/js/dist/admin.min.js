!function(e){e(document).ready(function(){t.init()});var t={init:function(){this.idgFeatureCardWidgets(),this.idgBannersWidgets(),this.idgBlockInit(),this.idgSectionsWidgetsAreas(),this.idgSectionsWidgetsAreasCustomize(),this.idgTextImageBoxWidgets()},idgFeatureCardWidgets:function(){e(document).on("keyup",".idg-feature-card-widget .card-title",function(){e(this).closest(".idg-feature-card-widget").find(".card-title").text(e(this).val())}),e(document).on("change",".idg-feature-card-widget .icon-selector",function(){"upload-custom-icon"===e(this).val()?(e(this).closest(".idg-feature-card-widget").find(".feature-card .icon > img").show(),e(this).closest(".idg-feature-card-widget").find(".custom-icon").removeClass("hidden")):(e(this).closest(".idg-feature-card-widget").find(".custom-icon").addClass("hidden"),e(this).closest(".idg-feature-card-widget").find(".feature-card .icon > img").hide(),e(this).closest(".idg-feature-card-widget").find(".feature-card .icon").removeClass().addClass("icon "+e(this).val())),e(this).closest(".idg-feature-card-widget").find(".feature-card .icon").removeClass().addClass("icon "+e(this).val())}),e(document).on("change",".idg-feature-card-widget .card-model",function(){var t=e(this).val();e(this).closest(".idg-feature-card-widget").find(".feature-card").removeClass().addClass("feature-card static-height "+t),"card-3"===t?(e(this).closest(".idg-feature-card-widget").find(".card-desc-wrapper").removeClass("hidden"),e(this).closest(".idg-feature-card-widget").find(".feature-card .card-desc, .feature-card .card-btn").show()):(e(this).closest(".idg-feature-card-widget").find(".card-desc-wrapper").addClass("hidden"),e(this).closest(".idg-feature-card-widget").find(".feature-card .card-desc, .feature-card .card-btn").hide())}),e(document).on("keyup",".idg-feature-card-widget .card-desc",function(){e(this).closest(".idg-feature-card-widget").find(".card-desc").text(e(this).val())}),e(document).on("keyup",".idg-feature-card-widget .card-btn-text",function(){e(this).closest(".idg-feature-card-widget").find(".card-btn.btn").text(e(this).val())})},idgBannersWidgets:function(){e(document).on("click",".number-of-banners-input",function(t){wpWidgets.save(e(this).closest(".widget"),0,1,0)}),e(document).on("click",".upload_image_button",function(t){t.preventDefault();var i=e(this);wp.media.editor.send.attachment=function(e,t){i.prev("input").val(t.id),i.parent().find("img.banner-img-preview").attr("src",t.url),wpWidgets.save(i.closest(".widget"),0,1,0)},wp.media.editor.open(i)}),e(document).on("click",".remove-banner-item",function(t){t.preventDefault();var i=e(this).closest(".idg-banners-widget"),a=i.find(".banners-items .banner").length;e(this).closest(".banner").addClass("deleting-banner").fadeOut(),i.find(".number-of-banners-input").val(a-1),i.find(".banner.deleting-banner").remove(),wpWidgets.save(i.closest(".widget"),0,1,0)})},idgBlockInit:function(){if(wp.element){var e=wp.element.createElement,t=wp.blocks.registerBlockType,i=wp.editor.RichText;t("gutenberg-boilerplate-es5/idgwp-gutenberg-block-card",{title:"Feature card block",icon:"paperclip",category:"widgets",attributes:{content:{type:"string",source:"html",selector:"div"}},edit:function(t){var a=t.attributes.content;return e(i,{tagName:"div",className:t.className,onChange:function(e){t.setAttributes({content:e}),function(e){e.startsWith("<a")?{backgroundColor:"#f3f4f5"}:{backgroundColor:"#7F0013"}}(a)},value:a})},save:function(t){var a=t.attributes.content;return e(i.Content,{tagName:"div",className:t.className,value:a})}})}},idgSectionsWidgetsAreas:function(){e(".widget-liquid-right").length&&(e(".widget-liquid-right").append(idg_admin.idg_custom_sections_form),e("div[id^=idg_wp_widget_area_]").each(function(){e(this).closest(".widgets-holder-wrap").addClass("idg-wp-custom-widget-area"),e(this).closest(".widgets-holder-wrap").find(".sidebar-description").length?e(this).closest(".widgets-holder-wrap").find(".sidebar-description").append('<p class="description description-idg"><a href="#" class="button-link button-link-delete idg-wp-widget-remove-area">Deletar esta seção</a></p>'):e(this).closest(".widgets-holder-wrap").find(".sidebar-name").after('<div class="sidebar-description"><p class="description"><a href="#" class="button-link button-link-delete idg-wp-widget-remove-area">Deletar esta seção</a></p></div>');e(this).closest(".widgets-holder-wrap").find(".description").last().append('<p><label>Section title</label><input class="widefat section-area-title" type="text"></p><p><label>Section custom class</label><input class="widefat section-area-classes" type="text"></p><p><label>Before each widget class</label><input class="widefat section-area-before-widget-classes" type="text"></p><div class="widget-control-actions" style="min-height: 32px;"><div class="alignright"><a href="#" class="section-area-custom-data-update button button-primary right">Update section</a></div></div>');var t=e(this).closest(".widgets-holder-wrap").find("div[id^=idg_wp_widget_area_]").attr("id");e.ajax({type:"POST",url:idg_admin.ajaxurl,data:{action:"idg_wp_get_custom_data_in_widget_area",idg_wp_widgets_area_id:t},success:function(i){i.success&&(e("#"+t).find(".section-area-title").val(i.data.section_title),e("#"+t).find(".section-area-classes").val(i.data.section_class),e("#"+t).find(".section-area-before-widget-classes").val(i.data.section_before_widget_class))}}),e(".idg-wp-widget-remove-area").click(function(t){t.preventDefault();var i=e(this).closest(".widgets-holder-wrap").find("div[id^=idg_wp_widget_area_]").attr("id");return e.ajax({type:"POST",url:idg_admin.ajaxurl,data:{action:"idg_wp_remove_widget_area",idg_wp_widgets_area_id:i},success:function(t){t.success&&e("#"+i).closest(".widgets-holder-wrap").remove()}}),!1}),e(".section-area-custom-data-update").click(function(t){t.preventDefault();var i=e(this).closest(".widgets-holder-wrap").find("div[id^=idg_wp_widget_area_]").attr("id"),a=e("#"+i).find(".section-area-title").val(),s=e("#"+i).find(".section-area-classes").val(),d=e("#"+i).find(".section-area-before-widget-classes").val();return e.ajax({type:"POST",url:idg_admin.ajaxurl,data:{action:"idg_wp_update_custom_data_in_widget_area",idg_wp_widgets_area_id:i,section_area_title:a,section_area_classes:s,section_before_widget_class:d},success:function(e){e.success}}),!1})}))},idgSectionsWidgetsAreasCustomize:function(){if(e("#idg-wp-home-widgets-sections-selector").length){var t=e("#idg-wp-home-widgets-sections-sortable"),i=e("#idg-wp-home-widgets-sections-selected"),a=[];function s(){a=[],e.each(t.find("li"),function(){a.push(e(this).attr("id"))}),i.val(a.toString()),i.trigger("change")}t.sortable(),t.disableSelection(),t.on("sortstop",s),e("#idg-wp-add-home-widgets-sections").on("click",function(){var t='<li id="'+e("#idg-wp-home-widgets-sections-selector").val()+'">'+e("#idg-wp-home-widgets-sections-selector option:selected").text()+' <a href="#" class="dashicons dashicons-trash"></a></li>';e("#idg-wp-home-widgets-sections-sortable").append(t),s()}),t.find("li > a").on("click",function(){e(this).parent().hide(),e(this).parent().remove(),s()})}},idgTextImageBoxWidgets:function(){if("undefined"!=typeof tinymce){var t=e(".idg-text");tinymce.init({selector:".idg-rich-text",menubar:!1,height:"200",plugins:"link",toolbar:"undo, redo, bold, italic, alignleft, aligncenter, alignright, alignjustify, cut, link, copy, paste",setup:function(i){i.on("init",function(){}),i.on("keyup",function(a){!function(i,a){e(i).closest(".idg-text-image-box-widget").find(t).html(a),t.trigger("change")}(i.getElement(),i.getContent()),tinyMCE.triggerSave()})}})}}}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLm1pbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImFkbWluIiwiaW5pdCIsInRoaXMiLCJpZGdGZWF0dXJlQ2FyZFdpZGdldHMiLCJpZGdCYW5uZXJzV2lkZ2V0cyIsImlkZ0Jsb2NrSW5pdCIsImlkZ1NlY3Rpb25zV2lkZ2V0c0FyZWFzIiwiaWRnU2VjdGlvbnNXaWRnZXRzQXJlYXNDdXN0b21pemUiLCJpZGdUZXh0SW1hZ2VCb3hXaWRnZXRzIiwib24iLCJjbG9zZXN0IiwiZmluZCIsInRleHQiLCJ2YWwiLCJzaG93IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImhpZGUiLCJjYXJkTW9kZWwiLCJlIiwid3BXaWRnZXRzIiwic2F2ZSIsInByZXZlbnREZWZhdWx0IiwiY2xpY2tlZEJ1dHRvbiIsIndwIiwibWVkaWEiLCJlZGl0b3IiLCJzZW5kIiwiYXR0YWNobWVudCIsInByb3BzIiwicHJldiIsImlkIiwicGFyZW50IiwiYXR0ciIsInVybCIsIm9wZW4iLCJiYW5uZXJzIiwibiIsImxlbmd0aCIsImZhZGVPdXQiLCJyZW1vdmUiLCJlbGVtZW50IiwiZWwiLCJjcmVhdGVFbGVtZW50IiwicmVnaXN0ZXJCbG9ja1R5cGUiLCJibG9ja3MiLCJSaWNoVGV4dCIsInRpdGxlIiwiaWNvbiIsImNhdGVnb3J5IiwiYXR0cmlidXRlcyIsImNvbnRlbnQiLCJ0eXBlIiwic291cmNlIiwic2VsZWN0b3IiLCJlZGl0IiwidGFnTmFtZSIsImNsYXNzTmFtZSIsIm9uQ2hhbmdlIiwibmV3Q29udGVudCIsInNldEF0dHJpYnV0ZXMiLCJzdGFydHNXaXRoIiwiYmFja2dyb3VuZENvbG9yIiwiY2hlY2tGb3JBRWxlbWVudCIsInZhbHVlIiwiQ29udGVudCIsImFwcGVuZCIsImlkZ19hZG1pbiIsImlkZ19jdXN0b21fc2VjdGlvbnNfZm9ybSIsImVhY2giLCJhZnRlciIsImxhc3QiLCJzZWN0aW9uVGl0bGUiLCJpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkIiwiYWpheCIsImFqYXh1cmwiLCJkYXRhIiwiYWN0aW9uIiwic3VjY2VzcyIsInJlcyIsInNlY3Rpb25fdGl0bGUiLCJzZWN0aW9uX2NsYXNzIiwic2VjdGlvbl9iZWZvcmVfd2lkZ2V0X2NsYXNzIiwiY2xpY2siLCJldmVudCIsInNlY3Rpb25fYXJlYV90aXRsZSIsInNlY3Rpb25fYXJlYV9jbGFzc2VzIiwiJHNlY3Rpb25zTGlzdCIsIiRzZWN0aW9uc1NlbGVjdGVkIiwic2VjdGlvbnNWYWxzIiwidXBkYXRlU2VjdGlvbkxpc3QiLCJwdXNoIiwidG9TdHJpbmciLCJ0cmlnZ2VyIiwic29ydGFibGUiLCJkaXNhYmxlU2VsZWN0aW9uIiwibGkiLCJ0aW55bWNlIiwiJGlkZ1RleHQiLCJtZW51YmFyIiwiaGVpZ2h0IiwicGx1Z2lucyIsInRvb2xiYXIiLCJzZXR1cCIsImh0bWwiLCJ1cGRhdGVUZXh0QXJlYSIsImdldEVsZW1lbnQiLCJnZXRDb250ZW50IiwidGlueU1DRSIsInRyaWdnZXJTYXZlIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFXQSxHQUNWQSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2pCQyxFQUFNQyxTQUdQLElBQUlELEVBQVEsQ0FDWEMsS0FBTSxXQUNMQyxLQUFLQyx3QkFDTEQsS0FBS0Usb0JBQ0xGLEtBQUtHLGVBQ0xILEtBQUtJLDBCQUNMSixLQUFLSyxtQ0FDTEwsS0FBS00sMEJBR05MLHNCQUF1QixXQUN0Qk4sRUFBRUMsVUFBVVcsR0FBRyxRQUFTLHVDQUF3QyxXQUMvRFosRUFBRUssTUFBTVEsUUFBUSw0QkFBNEJDLEtBQUssZUFBZUMsS0FBS2YsRUFBRUssTUFBTVcsU0FHOUVoQixFQUFFQyxVQUFVVyxHQUFHLFNBQVUsMENBQTJDLFdBRWxELHVCQURGWixFQUFFSyxNQUFNVyxPQUV0QmhCLEVBQUVLLE1BQU1RLFFBQVEsNEJBQTRCQyxLQUFLLDZCQUE2QkcsT0FDOUVqQixFQUFFSyxNQUFNUSxRQUFRLDRCQUE0QkMsS0FBSyxnQkFBZ0JJLFlBQVksWUFF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QUFHLDBDQUN2QjRGLEVBQWUsR0FrQmhCLFNBQVNDLElBQ1JELEVBQWUsR0FDZjVGLEVBQUV3RSxLQUFNa0IsRUFBYzVFLEtBQUssTUFBTyxXQUNqQzhFLEVBQWFFLEtBQU05RixFQUFFSyxNQUFNK0IsS0FBSyxTQUdqQ3VELEVBQWtCM0UsSUFBSzRFLEVBQWFHLFlBQ3BDSixFQUFrQkssUUFBUSxVQXZCM0JOLEVBQWNPLFdBQ2RQLEVBQWNRLG1CQUNkUixFQUFjOUUsR0FBSSxXQUFZaUYsR0FFOUI3RixFQUFFLHFDQUFxQ1ksR0FBRyxRQUFTLFdBQ2xELElBQUl1RixFQUFLLFdBQVluRyxFQUFFLDBDQUEwQ2dCLE1BQU8sS0FBTWhCLEVBQUUsMERBQTBEZSxPQUFRLDJEQUNsSmYsRUFBRywwQ0FBMkNxRSxPQUFROEIsR0FDdEROLE1BR0RILEVBQWM1RSxLQUFLLFVBQVVGLEdBQUcsUUFBUyxXQUN4Q1osRUFBRUssTUFBTThCLFNBQVNmLE9BQ2pCcEIsRUFBRUssTUFBTThCLFNBQVNRLFNBQ2pCa0QsUUFlSGxGLHVCQUF3QixXQUV2QixHQUFxQixvQkFBWHlGLFFBQVYsQ0FHQSxJQUFJQyxFQUFXckcsRUFBRSxhQUNqQm9HLFFBQVFoRyxLQUFLLENBQ1pxRCxTQUFVLGlCQUNWNkMsU0FBVSxFQUNWQyxPQUFRLE1BQ1JDLFFBQVUsT0FDVkMsUUFBUyxxR0FDVEMsTUFBTyxTQUFVN0UsR0FDaEJBLEVBQU9qQixHQUFHLE9BQVEsY0FHbEJpQixFQUFPakIsR0FBRyxRQUFTLFNBQVVVLElBUS9CLFNBQXlCTyxFQUFReUIsR0FDaEN0RCxFQUFFNkIsR0FBUWhCLFFBQVEsOEJBQThCQyxLQUFLdUYsR0FBVU0sS0FBTXJELEdBQ3JFK0MsRUFBU0wsUUFBUSxVQVJmWSxDQUFnQi9FLEVBQU9nRixhQUFjaEYsRUFBT2lGLGNBQzVDQyxRQUFRQyxzQkFuVGQsQ0ErVEdDIiwiZmlsZSI6ImFkbWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoJCkge1xuXHQkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cdFx0YWRtaW4uaW5pdCgpO1xuXHR9KTtcblxuXHR2YXIgYWRtaW4gPSB7XG5cdFx0aW5pdDogZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhpcy5pZGdGZWF0dXJlQ2FyZFdpZGdldHMoKTtcblx0XHRcdHRoaXMuaWRnQmFubmVyc1dpZGdldHMoKTtcblx0XHRcdHRoaXMuaWRnQmxvY2tJbml0KCk7XG5cdFx0XHR0aGlzLmlkZ1NlY3Rpb25zV2lkZ2V0c0FyZWFzKCk7XG5cdFx0XHR0aGlzLmlkZ1NlY3Rpb25zV2lkZ2V0c0FyZWFzQ3VzdG9taXplKCk7XG5cdFx0XHR0aGlzLmlkZ1RleHRJbWFnZUJveFdpZGdldHMoKTtcblx0XHR9LFxuXG5cdFx0aWRnRmVhdHVyZUNhcmRXaWRnZXRzOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHQkKGRvY3VtZW50KS5vbigna2V5dXAnLCAnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0IC5jYXJkLXRpdGxlJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCcpLmZpbmQoJy5jYXJkLXRpdGxlJykudGV4dCgkKHRoaXMpLnZhbCgpKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCAuaWNvbi1zZWxlY3RvcicsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIGNhcmRJY29uID0gJCh0aGlzKS52YWwoKTtcblx0XHRcdFx0aWYoIGNhcmRJY29uID09PSAndXBsb2FkLWN1c3RvbS1pY29uJyApe1xuXHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0JykuZmluZCgnLmZlYXR1cmUtY2FyZCAuaWNvbiA+IGltZycpLnNob3coKTtcblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCcpLmZpbmQoJy5jdXN0b20taWNvbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCcpLmZpbmQoJy5jdXN0b20taWNvbicpLmFkZENsYXNzKCdoaWRkZW4nKTtcblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCcpLmZpbmQoJy5mZWF0dXJlLWNhcmQgLmljb24gPiBpbWcnKS5oaWRlKCk7XG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuZmVhdHVyZS1jYXJkIC5pY29uJykucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnaWNvbiAnICsgJCh0aGlzKS52YWwoKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuZmVhdHVyZS1jYXJkIC5pY29uJykucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnaWNvbiAnICsgJCh0aGlzKS52YWwoKSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0JChkb2N1bWVudCkub24oJ2NoYW5nZScsICcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQgLmNhcmQtbW9kZWwnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBjYXJkTW9kZWwgPSAkKHRoaXMpLnZhbCgpO1xuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCcpLmZpbmQoJy5mZWF0dXJlLWNhcmQnKS5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCdmZWF0dXJlLWNhcmQgc3RhdGljLWhlaWdodCAnICsgY2FyZE1vZGVsICk7XG5cdFx0XHRcdGlmKCBjYXJkTW9kZWwgPT09ICdjYXJkLTMnICl7XG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuY2FyZC1kZXNjLXdyYXBwZXInKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuZmVhdHVyZS1jYXJkIC5jYXJkLWRlc2MsIC5mZWF0dXJlLWNhcmQgLmNhcmQtYnRuJykuc2hvdygpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0JykuZmluZCgnLmNhcmQtZGVzYy13cmFwcGVyJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdFx0XHRcdCQodGhpcykuY2xvc2VzdCgnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0JykuZmluZCgnLmZlYXR1cmUtY2FyZCAuY2FyZC1kZXNjLCAuZmVhdHVyZS1jYXJkIC5jYXJkLWJ0bicpLmhpZGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdCQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsICcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQgLmNhcmQtZGVzYycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuaWRnLWZlYXR1cmUtY2FyZC13aWRnZXQnKS5maW5kKCcuY2FyZC1kZXNjJykudGV4dCgkKHRoaXMpLnZhbCgpKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKGRvY3VtZW50KS5vbigna2V5dXAnLCAnLmlkZy1mZWF0dXJlLWNhcmQtd2lkZ2V0IC5jYXJkLWJ0bi10ZXh0JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5pZGctZmVhdHVyZS1jYXJkLXdpZGdldCcpLmZpbmQoJy5jYXJkLWJ0bi5idG4nKS50ZXh0KCQodGhpcykudmFsKCkpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGlkZ0Jhbm5lcnNXaWRnZXRzOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubnVtYmVyLW9mLWJhbm5lcnMtaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHR3cFdpZGdldHMuc2F2ZSggJCh0aGlzKS5jbG9zZXN0KCcud2lkZ2V0JyksIDAsIDEsIDApO1xuXHRcdFx0fSk7XG5cblx0XHRcdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcudXBsb2FkX2ltYWdlX2J1dHRvbicsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0dmFyIGNsaWNrZWRCdXR0b24gPSAkKHRoaXMpO1xuXG5cdFx0XHRcdHdwLm1lZGlhLmVkaXRvci5zZW5kLmF0dGFjaG1lbnQgPSBmdW5jdGlvbihwcm9wcywgYXR0YWNobWVudCl7XG5cdFx0XHRcdFx0Y2xpY2tlZEJ1dHRvbi5wcmV2KCdpbnB1dCcpLnZhbCggYXR0YWNobWVudC5pZCApO1xuXHRcdFx0XHRcdGNsaWNrZWRCdXR0b24ucGFyZW50KCkuZmluZCgnaW1nLmJhbm5lci1pbWctcHJldmlldycpLmF0dHIoICdzcmMnLCBhdHRhY2htZW50LnVybCApO1xuXHRcdFx0XHRcdHdwV2lkZ2V0cy5zYXZlKCBjbGlja2VkQnV0dG9uLmNsb3Nlc3QoJy53aWRnZXQnKSwgMCwgMSwgMCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHdwLm1lZGlhLmVkaXRvci5vcGVuKCBjbGlja2VkQnV0dG9uICk7XG5cdFx0XHR9KTtcblxuXHRcdFx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5yZW1vdmUtYmFubmVyLWl0ZW0nLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHZhciBiYW5uZXJzID0gJCh0aGlzKS5jbG9zZXN0KCcuaWRnLWJhbm5lcnMtd2lkZ2V0JyksXG5cdFx0XHRcdFx0biA9IGJhbm5lcnMuZmluZCgnLmJhbm5lcnMtaXRlbXMgLmJhbm5lcicpLmxlbmd0aDtcblxuXHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5iYW5uZXInKS5hZGRDbGFzcygnZGVsZXRpbmctYmFubmVyJykuZmFkZU91dCgpO1xuXHRcdFx0XHRiYW5uZXJzLmZpbmQoJy5udW1iZXItb2YtYmFubmVycy1pbnB1dCcpLnZhbCggbiAtIDEgKTtcblx0XHRcdFx0YmFubmVycy5maW5kKCcuYmFubmVyLmRlbGV0aW5nLWJhbm5lcicpLnJlbW92ZSgpO1xuXHRcdFx0XHR3cFdpZGdldHMuc2F2ZSggYmFubmVycy5jbG9zZXN0KCcud2lkZ2V0JyksIDAsIDEsIDApO1xuXHRcdFx0fSk7XG5cblx0XHR9LFxuXG5cdFx0aWRnQmxvY2tJbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiggd3AuZWxlbWVudCApe1xuXG5cdFx0XHRcdHZhciBlbCA9IHdwLmVsZW1lbnQuY3JlYXRlRWxlbWVudCxcblx0XHRcdFx0XHRyZWdpc3RlckJsb2NrVHlwZSA9IHdwLmJsb2Nrcy5yZWdpc3RlckJsb2NrVHlwZSxcblx0XHRcdFx0XHRSaWNoVGV4dCA9IHdwLmVkaXRvci5SaWNoVGV4dDtcblxuXHRcdFx0XHRmdW5jdGlvbiBjaGVja0ZvckFFbGVtZW50KGNvbnRlbnQpIHtcblx0XHRcdFx0XHRpZiggY29udGVudC5zdGFydHNXaXRoKCc8YScpICl7XG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyggJ2FscmVhZHkgaGFzIGEnICk7XG5cdFx0XHRcdFx0XHRibG9ja1N0eWxlID0geyBiYWNrZ3JvdW5kQ29sb3I6ICcjZjNmNGY1JyB9O1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyggJ01JU1NJTkcgYScgKTtcblx0XHRcdFx0XHRcdGJsb2NrU3R5bGUgPSB7IGJhY2tncm91bmRDb2xvcjogJyM3RjAwMTMnIH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGJsb2NrU3R5bGU7XG5cdFx0XHRcdHJlZ2lzdGVyQmxvY2tUeXBlKCAnZ3V0ZW5iZXJnLWJvaWxlcnBsYXRlLWVzNS9pZGd3cC1ndXRlbmJlcmctYmxvY2stY2FyZCcsIHtcblx0XHRcdFx0XHR0aXRsZTogJ0ZlYXR1cmUgY2FyZCBibG9jaycsXG5cdFx0XHRcdFx0aWNvbjogJ3BhcGVyY2xpcCcsXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6ICd3aWRnZXRzJyxcblx0XHRcdFx0XHRhdHRyaWJ1dGVzOiB7XG5cdFx0XHRcdFx0XHRjb250ZW50OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6ICdzdHJpbmcnLFxuXHRcdFx0XHRcdFx0XHRzb3VyY2U6ICdodG1sJyxcblx0XHRcdFx0XHRcdFx0c2VsZWN0b3I6ICdkaXYnLFxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZWRpdDogZnVuY3Rpb24oIHByb3BzICkge1xuXHRcdFx0XHRcdFx0dmFyIGNvbnRlbnQgPSBwcm9wcy5hdHRyaWJ1dGVzLmNvbnRlbnQ7XG5cblx0XHRcdFx0XHRcdGZ1bmN0aW9uIG9uQ2hhbmdlQ29udGVudCggbmV3Q29udGVudCApIHtcblx0XHRcdFx0XHRcdFx0cHJvcHMuc2V0QXR0cmlidXRlcyggeyBjb250ZW50OiBuZXdDb250ZW50IH0gKTtcblx0XHRcdFx0XHRcdFx0Y2hlY2tGb3JBRWxlbWVudCggY29udGVudCApO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZWwoXG5cdFx0XHRcdFx0XHRcdFJpY2hUZXh0LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dGFnTmFtZTogJ2RpdicsXG5cdFx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiBwcm9wcy5jbGFzc05hbWUsXG5cdFx0XHRcdFx0XHRcdFx0b25DaGFuZ2U6IG9uQ2hhbmdlQ29udGVudCxcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogY29udGVudCxcblx0XHRcdFx0XHRcdFx0XHQvLyBzdHlsZTogYmxvY2tTdHlsZVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRzYXZlOiBmdW5jdGlvbiggcHJvcHMgKSB7XG5cdFx0XHRcdFx0XHR2YXIgY29udGVudCA9IHByb3BzLmF0dHJpYnV0ZXMuY29udGVudDtcblx0XHRcdFx0XHRcdC8vIGNoZWNrRm9yQUVsZW1lbnQoIGNvbnRlbnQgKTtcblx0XHRcdFx0XHRcdHJldHVybiBlbCggUmljaFRleHQuQ29udGVudCwge1xuXHRcdFx0XHRcdFx0XHR0YWdOYW1lOiAnZGl2Jyxcblx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lOiBwcm9wcy5jbGFzc05hbWUsXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBjb250ZW50XG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSk7XG5cblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0aWRnU2VjdGlvbnNXaWRnZXRzQXJlYXM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmKCAkKCcud2lkZ2V0LWxpcXVpZC1yaWdodCcpLmxlbmd0aCApe1xuXHRcdFx0XHQkKCcud2lkZ2V0LWxpcXVpZC1yaWdodCcpLmFwcGVuZChpZGdfYWRtaW4uaWRnX2N1c3RvbV9zZWN0aW9uc19mb3JtKTtcblxuXHRcdFx0XHR2YXIgaWRnX3dwX3dpZGdldHNfYXJlYXMgPSAkKCAnZGl2W2lkXj1pZGdfd3Bfd2lkZ2V0X2FyZWFfXScgKTtcblx0XHRcdFx0aWRnX3dwX3dpZGdldHNfYXJlYXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcud2lkZ2V0cy1ob2xkZXItd3JhcCcpLmFkZENsYXNzKCdpZGctd3AtY3VzdG9tLXdpZGdldC1hcmVhJyk7XG5cdFx0XHRcdFx0aWYoICQodGhpcykuY2xvc2VzdCgnLndpZGdldHMtaG9sZGVyLXdyYXAnKS5maW5kKCcuc2lkZWJhci1kZXNjcmlwdGlvbicpLmxlbmd0aCApe1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcud2lkZ2V0cy1ob2xkZXItd3JhcCcpLmZpbmQoJy5zaWRlYmFyLWRlc2NyaXB0aW9uJykuYXBwZW5kKCc8cCBjbGFzcz1cImRlc2NyaXB0aW9uIGRlc2NyaXB0aW9uLWlkZ1wiPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJidXR0b24tbGluayBidXR0b24tbGluay1kZWxldGUgaWRnLXdwLXdpZGdldC1yZW1vdmUtYXJlYVwiPkRlbGV0YXIgZXN0YSBzZcOnw6NvPC9hPjwvcD4nKVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy53aWRnZXRzLWhvbGRlci13cmFwJykuZmluZCgnLnNpZGViYXItbmFtZScpLmFmdGVyKCc8ZGl2IGNsYXNzPVwic2lkZWJhci1kZXNjcmlwdGlvblwiPjxwIGNsYXNzPVwiZGVzY3JpcHRpb25cIj48YSBocmVmPVwiI1wiIGNsYXNzPVwiYnV0dG9uLWxpbmsgYnV0dG9uLWxpbmstZGVsZXRlIGlkZy13cC13aWRnZXQtcmVtb3ZlLWFyZWFcIj5EZWxldGFyIGVzdGEgc2XDp8OjbzwvYT48L3A+PC9kaXY+Jylcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgc2VjdGlvblRpdGxlICA9ICc8cD4nO1xuXHRcdFx0XHRcdFx0c2VjdGlvblRpdGxlICs9ICc8bGFiZWw+U2VjdGlvbiB0aXRsZTwvbGFiZWw+Jztcblx0XHRcdFx0XHRcdHNlY3Rpb25UaXRsZSArPSAnPGlucHV0IGNsYXNzPVwid2lkZWZhdCBzZWN0aW9uLWFyZWEtdGl0bGVcIiB0eXBlPVwidGV4dFwiPic7XG5cdFx0XHRcdFx0XHRzZWN0aW9uVGl0bGUgKz0gJzwvcD4nO1xuXG5cdFx0XHRcdFx0dmFyIHNlY3Rpb25DbGFzc2VzICA9ICc8cD4nO1xuXHRcdFx0XHRcdFx0c2VjdGlvbkNsYXNzZXMgKz0gJzxsYWJlbD5TZWN0aW9uIGN1c3RvbSBjbGFzczwvbGFiZWw+Jztcblx0XHRcdFx0XHRcdHNlY3Rpb25DbGFzc2VzICs9ICc8aW5wdXQgY2xhc3M9XCJ3aWRlZmF0IHNlY3Rpb24tYXJlYS1jbGFzc2VzXCIgdHlwZT1cInRleHRcIj4nO1xuXHRcdFx0XHRcdFx0c2VjdGlvbkNsYXNzZXMgKz0gJzwvcD4nO1xuXG5cdFx0XHRcdFx0dmFyIGJlZm9yZVdpZGdldENsYXNzZXMgID0gJzxwPic7XG5cdFx0XHRcdFx0XHRiZWZvcmVXaWRnZXRDbGFzc2VzICs9ICc8bGFiZWw+QmVmb3JlIGVhY2ggd2lkZ2V0IGNsYXNzPC9sYWJlbD4nO1xuXHRcdFx0XHRcdFx0YmVmb3JlV2lkZ2V0Q2xhc3NlcyArPSAnPGlucHV0IGNsYXNzPVwid2lkZWZhdCBzZWN0aW9uLWFyZWEtYmVmb3JlLXdpZGdldC1jbGFzc2VzXCIgdHlwZT1cInRleHRcIj4nO1xuXHRcdFx0XHRcdFx0YmVmb3JlV2lkZ2V0Q2xhc3NlcyArPSAnPC9wPic7XG5cblx0XHRcdFx0XHR2YXIgc2VjdGlvblVwZGF0ZUJ1dHRvbiAgPSAnPGRpdiBjbGFzcz1cIndpZGdldC1jb250cm9sLWFjdGlvbnNcIiBzdHlsZT1cIm1pbi1oZWlnaHQ6IDMycHg7XCI+PGRpdiBjbGFzcz1cImFsaWducmlnaHRcIj4nO1xuXHRcdFx0XHRcdFx0c2VjdGlvblVwZGF0ZUJ1dHRvbiArPSAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cInNlY3Rpb24tYXJlYS1jdXN0b20tZGF0YS11cGRhdGUgYnV0dG9uIGJ1dHRvbi1wcmltYXJ5IHJpZ2h0XCI+VXBkYXRlIHNlY3Rpb248L2E+Jztcblx0XHRcdFx0XHRcdHNlY3Rpb25VcGRhdGVCdXR0b24gKz0gJzwvZGl2PjwvZGl2Pic7XG5cblx0XHRcdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy53aWRnZXRzLWhvbGRlci13cmFwJykuZmluZCgnLmRlc2NyaXB0aW9uJykubGFzdCgpLmFwcGVuZChzZWN0aW9uVGl0bGUgKyBzZWN0aW9uQ2xhc3NlcyArIGJlZm9yZVdpZGdldENsYXNzZXMgKyBzZWN0aW9uVXBkYXRlQnV0dG9uKTtcblxuXHRcdFx0XHRcdHZhciBpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkID0gJCh0aGlzKS5jbG9zZXN0KCAnLndpZGdldHMtaG9sZGVyLXdyYXAnICkuZmluZCggJ2RpdltpZF49aWRnX3dwX3dpZGdldF9hcmVhX10nICkuYXR0ciggJ2lkJyApO1xuXG5cdFx0XHRcdFx0JC5hamF4KCB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIlBPU1RcIixcblx0XHRcdFx0XHRcdHVybDogaWRnX2FkbWluLmFqYXh1cmwsXG5cdFx0XHRcdFx0XHRkYXRhOlxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0YWN0aW9uIDogJ2lkZ193cF9nZXRfY3VzdG9tX2RhdGFfaW5fd2lkZ2V0X2FyZWEnLFxuXHRcdFx0XHRcdFx0XHRcdGlkZ193cF93aWRnZXRzX2FyZWFfaWQgOiBpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggcmVzICl7XG5cdFx0XHRcdFx0XHRcdGlmKCByZXMuc3VjY2VzcyApe1xuXHRcdFx0XHRcdFx0XHRcdCQoJyMnICsgaWRnX3dwX3dpZGdldHNfYXJlYV9pZCkuZmluZCgnLnNlY3Rpb24tYXJlYS10aXRsZScpLnZhbChyZXMuZGF0YS5zZWN0aW9uX3RpdGxlKTtcblx0XHRcdFx0XHRcdFx0XHQkKCcjJyArIGlkZ193cF93aWRnZXRzX2FyZWFfaWQpLmZpbmQoJy5zZWN0aW9uLWFyZWEtY2xhc3NlcycpLnZhbChyZXMuZGF0YS5zZWN0aW9uX2NsYXNzKTtcblx0XHRcdFx0XHRcdFx0XHQkKCcjJyArIGlkZ193cF93aWRnZXRzX2FyZWFfaWQpLmZpbmQoJy5zZWN0aW9uLWFyZWEtYmVmb3JlLXdpZGdldC1jbGFzc2VzJykudmFsKHJlcy5kYXRhLnNlY3Rpb25fYmVmb3JlX3dpZGdldF9jbGFzcyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHQkKCAnLmlkZy13cC13aWRnZXQtcmVtb3ZlLWFyZWEnICkuY2xpY2soIGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHR2YXIgaWRnX3dwX3dpZGdldHNfYXJlYV9pZCA9ICAkKHRoaXMpLmNsb3Nlc3QoICcud2lkZ2V0cy1ob2xkZXItd3JhcCcgKS5maW5kKCAnZGl2W2lkXj1pZGdfd3Bfd2lkZ2V0X2FyZWFfXScgKS5hdHRyKCAnaWQnICk7XG5cblx0XHRcdFx0XHRcdCQuYWpheCgge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIlBPU1RcIixcblx0XHRcdFx0XHRcdFx0dXJsOiBpZGdfYWRtaW4uYWpheHVybCxcblx0XHRcdFx0XHRcdFx0ZGF0YTpcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRhY3Rpb24gOiAnaWRnX3dwX3JlbW92ZV93aWRnZXRfYXJlYScsXG5cdFx0XHRcdFx0XHRcdFx0XHRpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkIDogaWRnX3dwX3dpZGdldHNfYXJlYV9pZCxcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggZGF0YSApe1xuXHRcdFx0XHRcdFx0XHRcdGlmKCBkYXRhLnN1Y2Nlc3MgKXtcblx0XHRcdFx0XHRcdFx0XHRcdCQoICcjJyArIGlkZ193cF93aWRnZXRzX2FyZWFfaWQgKS5jbG9zZXN0KCAnLndpZGdldHMtaG9sZGVyLXdyYXAnICkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHQkKCAnLnNlY3Rpb24tYXJlYS1jdXN0b20tZGF0YS11cGRhdGUnICkuY2xpY2soIGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHR2YXIgaWRnX3dwX3dpZGdldHNfYXJlYV9pZCA9ICQodGhpcykuY2xvc2VzdCggJy53aWRnZXRzLWhvbGRlci13cmFwJyApLmZpbmQoICdkaXZbaWRePWlkZ193cF93aWRnZXRfYXJlYV9dJyApLmF0dHIoICdpZCcgKSxcblx0XHRcdFx0XHRcdFx0c2VjdGlvbl9hcmVhX3RpdGxlID0gJCgnIycgKyBpZGdfd3Bfd2lkZ2V0c19hcmVhX2lkKS5maW5kKCAnLnNlY3Rpb24tYXJlYS10aXRsZScgKS52YWwoKSxcblx0XHRcdFx0XHRcdFx0c2VjdGlvbl9hcmVhX2NsYXNzZXMgPSAkKCcjJyArIGlkZ193cF93aWRnZXRzX2FyZWFfaWQpLmZpbmQoICcuc2VjdGlvbi1hcmVhLWNsYXNzZXMnICkudmFsKCksXG5cdFx0XHRcdFx0XHRcdHNlY3Rpb25fYmVmb3JlX3dpZGdldF9jbGFzcyA9ICQoJyMnICsgaWRnX3dwX3dpZGdldHNfYXJlYV9pZCkuZmluZCggJy5zZWN0aW9uLWFyZWEtYmVmb3JlLXdpZGdldC1jbGFzc2VzJyApLnZhbCgpO1xuXG5cdFx0XHRcdFx0XHQkLmFqYXgoIHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJQT1NUXCIsXG5cdFx0XHRcdFx0XHRcdHVybDogaWRnX2FkbWluLmFqYXh1cmwsXG5cdFx0XHRcdFx0XHRcdGRhdGE6XG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0YWN0aW9uIDogJ2lkZ193cF91cGRhdGVfY3VzdG9tX2RhdGFfaW5fd2lkZ2V0X2FyZWEnLFxuXHRcdFx0XHRcdFx0XHRcdFx0aWRnX3dwX3dpZGdldHNfYXJlYV9pZCA6IGlkZ193cF93aWRnZXRzX2FyZWFfaWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWN0aW9uX2FyZWFfdGl0bGUgOiBzZWN0aW9uX2FyZWFfdGl0bGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWN0aW9uX2FyZWFfY2xhc3NlcyA6IHNlY3Rpb25fYXJlYV9jbGFzc2VzLFxuXHRcdFx0XHRcdFx0XHRcdFx0c2VjdGlvbl9iZWZvcmVfd2lkZ2V0X2NsYXNzIDogc2VjdGlvbl9iZWZvcmVfd2lkZ2V0X2NsYXNzLFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCBkYXRhICl7XG5cdFx0XHRcdFx0XHRcdFx0aWYoIGRhdGEuc3VjY2VzcyApe1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0aWRnU2VjdGlvbnNXaWRnZXRzQXJlYXNDdXN0b21pemU6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmKCAkKCcjaWRnLXdwLWhvbWUtd2lkZ2V0cy1zZWN0aW9ucy1zZWxlY3RvcicpLmxlbmd0aCApe1xuXHRcdFx0XHR2YXIgJHNlY3Rpb25zTGlzdCA9ICQoICcjaWRnLXdwLWhvbWUtd2lkZ2V0cy1zZWN0aW9ucy1zb3J0YWJsZScgKSxcblx0XHRcdFx0XHQkc2VjdGlvbnNTZWxlY3RlZCA9ICQoICcjaWRnLXdwLWhvbWUtd2lkZ2V0cy1zZWN0aW9ucy1zZWxlY3RlZCcgKSxcblx0XHRcdFx0XHRzZWN0aW9uc1ZhbHMgPSBbXTtcblxuXHRcdFx0XHQkc2VjdGlvbnNMaXN0LnNvcnRhYmxlKCk7XG5cdFx0XHRcdCRzZWN0aW9uc0xpc3QuZGlzYWJsZVNlbGVjdGlvbigpO1xuXHRcdFx0XHQkc2VjdGlvbnNMaXN0Lm9uKCAnc29ydHN0b3AnLCB1cGRhdGVTZWN0aW9uTGlzdCApO1xuXG5cdFx0XHRcdCQoJyNpZGctd3AtYWRkLWhvbWUtd2lkZ2V0cy1zZWN0aW9ucycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR2YXIgbGkgPSAnPGxpIGlkPVwiJysgJCgnI2lkZy13cC1ob21lLXdpZGdldHMtc2VjdGlvbnMtc2VsZWN0b3InKS52YWwoKSArJ1wiPicrICQoJyNpZGctd3AtaG9tZS13aWRnZXRzLXNlY3Rpb25zLXNlbGVjdG9yIG9wdGlvbjpzZWxlY3RlZCcpLnRleHQoKSArJyA8YSBocmVmPVwiI1wiIGNsYXNzPVwiZGFzaGljb25zIGRhc2hpY29ucy10cmFzaFwiPjwvYT48L2xpPic7XG5cdFx0XHRcdFx0JCggJyNpZGctd3AtaG9tZS13aWRnZXRzLXNlY3Rpb25zLXNvcnRhYmxlJyApLmFwcGVuZCggbGkgKTtcblx0XHRcdFx0XHR1cGRhdGVTZWN0aW9uTGlzdCgpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQkc2VjdGlvbnNMaXN0LmZpbmQoJ2xpID4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHQkKHRoaXMpLnBhcmVudCgpLmhpZGUoKTtcblx0XHRcdFx0XHQkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpO1xuXHRcdFx0XHRcdHVwZGF0ZVNlY3Rpb25MaXN0KCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGZ1bmN0aW9uIHVwZGF0ZVNlY3Rpb25MaXN0KCkge1xuXHRcdFx0XHRcdHNlY3Rpb25zVmFscyA9IFtdO1xuXHRcdFx0XHRcdCQuZWFjaCggJHNlY3Rpb25zTGlzdC5maW5kKCdsaScpLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRzZWN0aW9uc1ZhbHMucHVzaCggJCh0aGlzKS5hdHRyKCdpZCcpICk7XG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0JHNlY3Rpb25zU2VsZWN0ZWQudmFsKCBzZWN0aW9uc1ZhbHMudG9TdHJpbmcoKSApO1xuXHRcdFx0XHRcdCRzZWN0aW9uc1NlbGVjdGVkLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdGlkZ1RleHRJbWFnZUJveFdpZGdldHM6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0aWYodHlwZW9mIHRpbnltY2UgPT0gJ3VuZGVmaW5lZCcpXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0dmFyICRpZGdUZXh0ID0gJCgnLmlkZy10ZXh0Jyk7XG5cdFx0XHR0aW55bWNlLmluaXQoe1xuXHRcdFx0XHRzZWxlY3RvcjogJy5pZGctcmljaC10ZXh0Jyxcblx0XHRcdFx0bWVudWJhciA6IGZhbHNlLFxuXHRcdFx0XHRoZWlnaHQ6ICcyMDAnLFxuXHRcdFx0XHRwbHVnaW5zIDogJ2xpbmsnLFxuXHRcdFx0XHR0b29sYmFyOiAndW5kbywgcmVkbywgYm9sZCwgaXRhbGljLCBhbGlnbmxlZnQsIGFsaWduY2VudGVyLCBhbGlnbnJpZ2h0LCBhbGlnbmp1c3RpZnksIGN1dCwgbGluaywgY29weSwgcGFzdGUnLFxuXHRcdFx0XHRzZXR1cDogZnVuY3Rpb24gKGVkaXRvcikge1xuXHRcdFx0XHRcdGVkaXRvci5vbignaW5pdCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdC8vIG9yaWdpbmFsRWRpdG9yID0gZWRpdG9yLmdldEVsZW1lbnQoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRlZGl0b3Iub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCB0aW55bWNlLmdldCggJCh0aGlzKSApLmdldEVsZW1lbnQoKSApO1xuXHRcdFx0XHRcdFx0dXBkYXRlVGV4dEFyZWEoIGVkaXRvci5nZXRFbGVtZW50KCksIGVkaXRvci5nZXRDb250ZW50KCkgKTtcblx0XHRcdFx0XHRcdHRpbnlNQ0UudHJpZ2dlclNhdmUoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGZ1bmN0aW9uIHVwZGF0ZVRleHRBcmVhKCBlZGl0b3IsIGNvbnRlbnQgKSB7XG5cdFx0XHRcdCQoZWRpdG9yKS5jbG9zZXN0KCcuaWRnLXRleHQtaW1hZ2UtYm94LXdpZGdldCcpLmZpbmQoJGlkZ1RleHQpLmh0bWwoIGNvbnRlbnQgKTtcblx0XHRcdFx0JGlkZ1RleHQudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdH07XG59KShqUXVlcnkpO1xuIl19
